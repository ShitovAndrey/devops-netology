# Домашнее задание к занятию 1. «Типы и структура СУБД»

## Задача 1

<em>Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.</em>

- **<em>электронные чеки в json-виде</em>** - Чек можно рассмотреть как конечный документ и для его хранения отлично подходят документоориентированные СУБД. 
   Требование с форматом json реализовано в СУБД CouchDB, в свою очередь так же может подойти MongoDB, 
   хотя последняя хранит данные в BSON, при выборки его можно конвертировать в JSON.
- **<em>склады и автомобильные дороги для логистической компании</em>** - Такие данные наверняка будут использоваться для решения "Транспортной задачи". 
   Такую задачу можно решать с помощью графов и в этом случаи лучше подойдёт СУБД с нативным функционалом по хранению графов, такая как OrientDB или Neo4j.
- **<em>генеалогические деревья</em>** - Тут есть отношения родители-дети и для этой задачи подойдёт реляционная СУБД. Используя ограничения и каскадное обновление достигается целостность данных.
- **<em>кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации</em>** - Идентификатор клиента можно представить как ключ, а какой-нибудь токен как значение. 
Для данной задачи подойдет СУБД типа ключ-значение и возможностью задать TTL у записей, к таким относятся redis или memcached.
- **<em>отношения клиент-покупка для интернет-магазина</em>** - Как и в первом случаи с чеками, в общем виде задача может быть решена с помощью документоориентированной СУБД.
В документе покупке достаточно иметь поле id клиента. На реляционной СУБД тоже можно решить данную задачу, но либо нельзя будет удалять данные из справочника товаров, либо опять же
хранить состав покупки в виде единой структуры.



## Задача 2

Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):

- **<em>данные записываются на все узлы с задержкой до часа (асинхронная запись)</em>** - AP (availability + partition tolerance – consistency)
- **<em>при сетевых сбоях система может разделиться на 2 раздельных кластера</em>** - AP (availability + partition tolerance – consistency)
- **<em>система может не прислать корректный ответ или сбросить соединение</em>** - CP (consistency + partition tolerance – availability) 

Согласно PACELC-теореме как бы вы классифицировали эти реализации?

- **<em>данные записываются на все узлы с задержкой до часа (асинхронная запись)</em>** - PA/EL или PC/EL
- **<em>при сетевых сбоях система может разделиться на 2 раздельных кластера</em>** - PA/EL или PA/EC
- **<em>система может не прислать корректный ответ или сбросить соединение</em>** - PC/EL - если разделена, то консистентна и сбрасывает соединение, если нет, то упор на время отклика.

## Задача 3

**<em>Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?</em>**  
Полное сочетание всех свойств принципов BASE и ACID в одной системе не возможно, т.к. basically availability и soft state из BASE противоречат consistency из ACID.


## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни,
- реакция на истечение таймаута.

Вы слышали о key-value-хранилище, которое имеет механизм Pub/Sub. 
Что это за система? Какие минусы выбора этой системы?

**Redis** - является СУБД типа "ключ-значение" и имеет встроенный механизм pub/sub.  
Из минусов. Отсутствует гарантия доставки сообщения подписчику (sub), т.к. издатель (pub) отправляет сообщение в общий канал/шину только один раз, 
и если подписчик не в состояние принять и обработать сообщение на этот момент времени, то оно будет потеряно.

---