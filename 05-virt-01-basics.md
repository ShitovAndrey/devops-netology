# Домашнее задание к занятию "1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

1. **Отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС:**

При `аппаратной виртуализации` отсутствует хостовая операционная система, её роль выполняет гипервизор.
В своей работе в обязательном порядке использует аппаратную виртуализацию процессора.
Гостевые ОС работают с физическими ресурсами напрямую.
Такая система более производительна и предназначается для запуска больших объемов рабочих нагрузок.

При `паравиртуализации` гипервизор работает поверх хостовой операционной системы.
В своей работе может использовать аппаратную виртуализацию процессора или же выполнять эмуляцию без таковой.
Гостевые ОС работают с физическими ресурсами через хостовую ОС, при этом ядро гостевой ВМ незначительно модернизируется.
    
При `виртуализации уровня ОС` или контейнеризации рабочая нагрузка выполняется ядром хостовой ОС.
Такой тип позволяет запускать только виртуальные машины, ядра которых имеют тот же тип что и ядро хостовой ОС.

2. **Использования организации физических серверов:**

`Высоконагруженная база данных, чувствительная к отказу` - HA кластер на физических серверах.
Для высоконагруженных СУБД необходимо минимизировать задержки при доступе к ресурсам сервера, в частности дисковой
подсистемы. Любая виртуализация может снизить производительность приложения данного класса.  

`Различные web-приложения` - виртуализация уровня ОС (к примеру Kubernetes). В общем случаи для размещения web
приложений хорошо подходить контейнеризация, т.к. имеет наивысшую вычислительную плотность и ресурсы расходуются
максимально эффективно. Нет особых требований по доступу к аппаратным ресурсам. Так же приложения могут быть stateless.  

`Windows системы для использования бухгалтерским отделом` - паравиртуализация. Скорее всего планируется использовать
различные приложения и речь идёт про VDI. Паравиртуализация подходит лучше всего, т.к. обеспечивает высокую
вычислительную плотность, на одном физическом сервере размещаются сразу несколько ВМ и предоставляет возможность
работать с desktop приложениями.  

`Системы, выполняющие высокопроизводительные расчеты на GPU` - физические сервера. Приложению требуется доступ к
аппаратному видеоадаптеру. Любая виртуализация может снизить производительность приложения данного класса.

3. **Выберите подходящую систему управления виртуализацией для предложенного сценария.**

`100 виртуальных машин на базе Linux и Windows` - Кластер VMware vSphere отлично виртуализирует ОС семейства Windows
и Linux. Существует поддержка вендора. Отличное решение enterprise уровня, правая верхняя четверть квадрата Гартнера.

`Open source решения для (20-30 серверов) Linux, Windows` - Кластер Proxmox (qemu + kvm). Удобный web gui и поддержка
RestAPI. В сравнение с Xen более простой в установке, сопровождение и лучшая поддержка ОС Windows. Нативная поддержка
кластеризации и HA. Собственный инструмент резервного копирования.
`Для виртуализации Windows инфраструктуры` - Аппаратный гипервизор от Microsoft в редакции Hyper-V Server является
бесплатным, нативным решением для виртуализации операционных систем Windows.

`Рабочего окружение для тестирования ПО на Linux` - VirtualBox гипервизор второго типа. Простота использования и
установки. Нет особых требований к аппаратным ресурсам. Провайдер VirtualBox для Vargant поддерживается из коробки.
Поддерживается Minikube-ом для тестирования контейнерных приложений Kubernetes.

4. **Проблемы и недостатки гетерогенной среды виртуализации:**
 - Увеличиваются требования к специалистам поддержки и расходы на них.
 - Увеличения расходов на оборудование, в т.ч. СХД и т.д. 
 - Увеличение расходов на лицензирование гостевых ОС, лицензий СРК и т.п.
 - Любые интеграции с системами виртуализации (CMDB, инструменты CI/CD) требуют двойной разработки.

Использование гетерогенной среды виртуализации должно быть обосновано необходимыми функциями или экономически. Для митигации рисков по возможности необходимо придерживаться единственный продуктивной системы виртуализации, при невозможности, детальнее прорабатывать архитектуры решений.

С точки зрения увеличения финансовых расходов создания двух и более продуктивных виртуальных сред считаю не целесообразным.
В свою очередь, если требуют задачи, то без создания кластеров Kubernetes сложно обойтись. Так же может быть оправдано создание не продуктивных, тестовых сред виртуализации.

Пример:
Кластере VMware vSphere отлично виртуализирует ОС семейства Windows и Linux. Решение enterprise уровня. Существует поддержка вендора.
При необходимости создаем Kubernetes на ВМ кластера vSphere.
